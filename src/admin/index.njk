---
layout: layouts/shop.njk
title: Admin
kicker: Admin
subtitle: Manage the product catalog. Changes are saved in your browser until export.
pageJs: /assets/js/admin.js
---

<div class="card pad">
  <div class="badge">⚠️ Catalog admin: changes are stored in your browser. Use Export to download JSON, then update <code>src/_data/products.json</code>.</div>
</div>

<div style="height:18px;"></div>

<div class="admin-shell">
  <section class="card admin-panel">
    <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:flex-end; justify-content:space-between;">
      <div style="flex:1; min-width: 240px;">
        <label for="admin-search">Search products</label>
        <input id="admin-search" type="search" placeholder="Search title, SKU, tags…" data-admin-search />
      </div>

      <div style="min-width: 180px;">
        <label for="admin-collection">Collection</label>
        <select id="admin-collection" data-admin-filter-collection>
          <option value="">All</option>
        </select>
      </div>

      <div style="min-width: 160px;">
        <label for="admin-stock">Stock</label>
        <select id="admin-stock" data-admin-filter-stock>
          <option value="">All</option>
          <option value="in">In stock</option>
          <option value="out">Out of stock</option>
        </select>
      </div>

      <div style="min-width: 160px;">
        <label for="admin-featured">Featured</label>
        <select id="admin-featured" data-admin-filter-featured>
          <option value="">All</option>
          <option value="yes">Featured</option>
          <option value="no">Not featured</option>
        </select>
      </div>

      <div style="min-width: 200px;">
        <label for="admin-sort">Sort</label>
        <select id="admin-sort" data-admin-sort>
          <option value="updated-desc">Updated (newest)</option>
          <option value="az">A → Z</option>
          <option value="price-asc">Price low → high</option>
          <option value="price-desc">Price high → low</option>
        </select>
      </div>
    </div>

    <div style="height:12px;"></div>

    <div style="display:flex; gap:10px; flex-wrap:wrap;">
      <button class="btn primary" type="button" data-admin-new>+ Add product</button>
      <button class="btn" type="button" data-admin-duplicate>Duplicate</button>
      <button class="btn" type="button" data-admin-bulk-featured>Bulk: toggle featured</button>
      <button class="btn" type="button" data-admin-bulk-stock>Bulk: toggle in-stock</button>
    </div>

    <hr />

    <div class="small" style="color:var(--muted); margin-bottom:10px;">
      <span data-admin-count>0</span> products · click an item to edit
    </div>

    <div class="stack" data-admin-list style="gap:10px;"></div>
  </section>

  <section class="card admin-panel">
    <div style="display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; align-items:flex-end;">
      <div>
        <span class="kicker">Editor</span>
        <h2 style="margin:10px 0 0;" data-admin-form-title>New product</h2>
        <div class="small" style="color:var(--muted);" data-admin-form-subtitle>Draft auto-saves to your browser.</div>
      </div>
      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn" type="button" data-admin-reset>Reset changes</button>
        <button class="btn danger" type="button" data-admin-delete>Delete</button>
      </div>
    </div>

    <div style="height:14px;"></div>

    <form class="stack" data-admin-form>
      <div class="field-row cols-2">
        <div>
          <label for="f-title">Title</label>
          <input id="f-title" type="text" required data-f="title" />
          <div class="hint" data-err="title"></div>
        </div>

        <div>
          <label for="f-slug">Slug</label>
          <input id="f-slug" type="text" required data-f="slug" />
          <div class="hint">Auto-generated from title. Use lowercase and dashes.</div>
          <div class="hint" data-err="slug"></div>
        </div>
      </div>

      <div class="field-row cols-3">
        <div>
          <label for="f-id">ID</label>
          <input id="f-id" type="text" required data-f="id" />
          <div class="hint" data-err="id"></div>
        </div>

        <div>
          <label for="f-sku">SKU</label>
          <input id="f-sku" type="text" data-f="sku" />
        </div>

        <div>
          <label for="f-updatedAt">Updated (ISO date)</label>
          <input id="f-updatedAt" type="text" data-f="updatedAt" />
          <div class="hint">Auto-updated on Save.</div>
        </div>
      </div>

      <div class="field-row cols-3">
        <div>
          <label for="f-price">Price</label>
          <input id="f-price" type="number" step="0.01" min="0" required data-f="price" />
          <div class="hint" data-err="price"></div>
        </div>

        <div>
          <label for="f-compareAt">Compare-at</label>
          <input id="f-compareAt" type="number" step="0.01" min="0" data-f="compareAt" />
        </div>

        <div>
          <label for="f-inStock">Stock</label>
          <select id="f-inStock" data-f="inStock">
            <option value="true">In stock</option>
            <option value="false">Out of stock</option>
          </select>
        </div>
      </div>

      <div class="field-row cols-3">
        <div>
          <label for="f-featured">Featured</label>
          <select id="f-featured" data-f="featured">
            <option value="false">No</option>
            <option value="true">Yes</option>
          </select>
        </div>

        <div>
          <label for="f-isSpecial">Special</label>
          <select id="f-isSpecial" data-f="isSpecial">
            <option value="false">No</option>
            <option value="true">Yes</option>
          </select>
        </div>

        <div>
          <label for="f-images">Image paths (comma separated)</label>
          <input id="f-images" type="text" data-f="images" placeholder="/assets/img/placeholder.svg" />
        </div>
      </div>

      <div>
        <label for="f-collections">Collections (comma separated slugs)</label>
        <input id="f-collections" type="text" data-f="collectionSlugs" placeholder="barrels, specials" />
        <div class="hint" data-err="collectionSlugs"></div>
      </div>

      <div>
        <label for="f-tags">Tags (comma separated)</label>
        <input id="f-tags" type="text" data-f="tags" placeholder="AR15, Stock, Polymer" />
      </div>

      <div>
        <label for="f-short">Short description</label>
        <textarea id="f-short" data-f="shortDescription"></textarea>
      </div>

      <div>
        <label for="f-desc">Long description</label>
        <textarea id="f-desc" data-f="description"></textarea>
      </div>

      <div>
        <label for="f-variants">Variants (JSON)</label>
        <textarea id="f-variants" data-f="variants" placeholder='[{"name":"Color","options":["Black","FDE"]}]'></textarea>
        <div class="hint">Leave blank for no variants.</div>
        <div class="hint" data-err="variants"></div>
      </div>

      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn primary" type="button" data-admin-save>Save (local)</button>
        <button class="btn" type="button" data-admin-export>Export JSON</button>
        <label class="btn" style="cursor:pointer;">
          Import JSON
          <input type="file" accept="application/json" style="display:none;" data-admin-import />
        </label>
      </div>

      <div class="small" style="color:var(--muted2);">
        Import options: you can replace the entire dataset or merge by <code>id</code>.
      </div>
    </form>
  </section>
</div>

<script id="admin-products-seed" type="application/json">{{ products | json | safe }}</script>
<script id="admin-collections-seed" type="application/json">{{ collectionsData | json | safe }}</script>
